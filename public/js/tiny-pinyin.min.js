// Tiny Pinyin wrapper - Simplified version
(function(window) {
  'use strict';

  const pinyinDict = {
    '啊': 'a', '阿': 'a', '八': 'b', '白': 'b', '百': 'b', '拜': 'b', '班': 'b', '般': 'b', '办': 'b', '半': 'b',
    '伴': 'b', '擦': 'c', '才': 'c', '采': 'c', '彩': 'c', '菜': 'c', '蔡': 'c', '参': 'c', '餐': 'c', '层': 'c',
    '查': 'c', '柴': 'c', '产': 'c', '常': 'c', '长': 'c', '场': 'c', '厂': 'c', '唱': 'c', '超': 'c', '朝': 'c',
    '车': 'c', '陈': 'c', '成': 'c', '程': 'c', '吃': 'c', '充': 'c', '出': 'c', '处': 'c', '川': 'c', '创': 'c',
    '春': 'c', '词': 'c', '次': 'c', '从': 'c', '达': 'd', '打': 'd', '大': 'd', '带': 'd', '待': 'd', '戴': 'd',
    '单': 'd', '担': 'd', '但': 'd', '当': 'd', '党': 'd', '导': 'd', '到': 'd', '道': 'd', '的': 'd', '得': 'd',
    '灯': 'd', '等': 'd', '低': 'd', '地': 'd', '第': 'd', '点': 'd', '电': 'd', '店': 'd', '定': 'd', '东': 'd',
    '冬': 'd', '动': 'd', '都': 'd', '读': 'd', '独': 'd', '度': 'd', '短': 'd', '段': 'd', '对': 'd', '多': 'd',
    '饿': 'e', '恩': 'e', '儿': 'e', '而': 'e', '二': 'e', '发': 'f', '法': 'f', '反': 'f', '饭': 'f', '范': 'f',
    '方': 'f', '房': 'f', '放': 'f', '非': 'f', '飞': 'f', '分': 'f', '风': 'f', '封': 'f', '冯': 'f', '服': 'f',
    '府': 'f', '父': 'f', '该': 'g', '改': 'g', '干': 'g', '甘': 'g', '感': 'g', '刚': 'g', '港': 'g', '高': 'g',
    '告': 'g', '哥': 'g', '歌': 'g', '格': 'g', '个': 'g', '各': 'g', '给': 'g', '根': 'g', '跟': 'g', '更': 'g',
    '工': 'g', '功': 'g', '公': 'g', '共': 'g', '古': 'g', '故': 'g', '顾': 'g', '瓜': 'g', '关': 'g', '管': 'g',
    '观': 'g', '光': 'g', '广': 'g', '贵': 'g', '国': 'g', '果': 'g', '过': 'g', '还': 'h', '海': 'h', '害': 'h',
    '含': 'h', '寒': 'h', '韩': 'h', '汉': 'h', '行': 'h', '航': 'h', '好': 'h', '号': 'h', '合': 'h', '何': 'h',
    '和': 'h', '河': 'h', '黑': 'h', '很': 'h', '红': 'h', '后': 'h', '厚': 'h', '呼': 'h', '胡': 'h', '湖': 'h',
    '花': 'h', '华': 'h', '化': 'h', '画': 'h', '话': 'h', '怀': 'h', '环': 'h', '换': 'h', '黄': 'h', '回': 'h',
    '会': 'h', '火': 'h', '或': 'h', '机': 'j', '鸡': 'j', '基': 'j', '激': 'j', '及': 'j', '级': 'j', '即': 'j',
    '极': 'j', '计': 'j', '记': 'j', '际': 'j', '季': 'j', '济': 'j', '继': 'j', '加': 'j', '佳': 'j', '家': 'j',
    '假': 'j', '价': 'j', '架': 'j', '间': 'j', '坚': 'j', '肩': 'j', '简': 'j', '见': 'j', '件': 'j', '建': 'j',
    '将': 'j', '江': 'j', '讲': 'j', '交': 'j', '叫': 'j', '教': 'j', '阶': 'j', '接': 'j', '结': 'j', '姐': 'j',
    '节': 'j', '解': 'j', '界': 'j', '今': 'j', '金': 'j', '进': 'j', '近': 'j', '尽': 'j', '京': 'j', '经': 'j',
    '精': 'j', '井': 'j', '景': 'j', '净': 'j', '究': 'j', '九': 'j', '久': 'j', '酒': 'j', '就': 'j', '举': 'j',
    '局': 'j', '具': 'j', '据': 'j', '卡': 'k', '开': 'k', '看': 'k', '康': 'k', '抗': 'k', '考': 'k', '靠': 'k',
    '科': 'k', '可': 'k', '克': 'k', '刻': 'k', '客': 'k', '空': 'k', '口': 'k', '苦': 'k', '块': 'k', '快': 'k',
    '拉': 'l', '来': 'l', '赖': 'l', '蓝': 'l', '老': 'l', '乐': 'l', '了': 'l', '类': 'l', '冷': 'l', '离': 'l',
    '李': 'l', '里': 'l', '理': 'l', '力': 'l', '历': 'l', '立': 'l', '利': 'l', '例': 'l', '联': 'l', '连': 'l',
    '良': 'l', '两': 'l', '量': 'l', '料': 'l', '列': 'l', '林': 'l', '临': 'l', '领': 'l', '刘': 'l', '六': 'l',
    '流': 'l', '龙': 'l', '楼': 'l', '路': 'l', '论': 'l', '落': 'l', '妈': 'm', '麻': 'm', '马': 'm', '吗': 'm',
    '买': 'm', '卖': 'm', '满': 'm', '慢': 'm', '毛': 'm', '么': 'm', '没': 'm', '美': 'm', '每': 'm', '门': 'm',
    '们': 'm', '民': 'm', '名': 'm', '明': 'm', '命': 'm', '母': 'm', '木': 'm', '目': 'm', '那': 'n', '哪': 'n',
    '难': 'n', '南': 'n', '脑': 'n', '呢': 'n', '内': 'n', '能': 'n', '你': 'n', '年': 'n', '念': 'n', '娘': 'n',
    '鸟': 'n', '您': 'n', '宁': 'n', '牛': 'n', '农': 'n', '女': 'n', '欧': 'o', '怕': 'p', '排': 'p', '盘': 'p',
    '旁': 'p', '跑': 'p', '培': 'p', '朋': 'p', '平': 'p', '坡': 'p', '破': 'p', '七': 'q', '其': 'q', '奇': 'q',
    '齐': 'q', '期': 'q', '起': 'q', '气': 'q', '千': 'q', '钱': 'q', '前': 'q', '强': 'q', '墙': 'q', '桥': 'q',
    '切': 'q', '且': 'q', '亲': 'q', '轻': 'q', '清': 'q', '情': 'q', '请': 'q', '穷': 'q', '秋': 'q', '区': 'q',
    '曲': 'q', '取': 'q', '去': 'q', '全': 'q', '群': 'q', '然': 'r', '让': 'r', '热': 'r', '人': 'r', '认': 'r',
    '任': 'r', '日': 'r', '容': 'r', '肉': 'r', '如': 'r', '入': 'r', '若': 'r', '撒': 's', '三': 's', '散': 's',
    '色': 's', '山': 's', '善': 's', '上': 's', '少': 's', '社': 's', '身': 's', '深': 's', '什': 's', '神': 's',
    '生': 's', '声': 's', '省': 's', '胜': 's', '师': 's', '诗': 's', '十': 's', '石': 's', '时': 's', '实': 's',
    '识': 's', '史': 's', '使': 's', '始': 's', '市': 's', '世': 's', '事': 's', '是': 's', '手': 's', '首': 's',
    '受': 's', '书': 's', '树': 's', '数': 's', '水': 's', '说': 's', '司': 's', '思': 's', '私': 's', '死': 's',
    '四': 's', '送': 's', '苏': 's', '宋': 's', '算': 's', '虽': 's', '随': 's', '孙': 's', '所': 's', '他': 't',
    '她': 't', '它': 't', '台': 't', '太': 't', '谈': 't', '汤': 't', '唐': 't', '糖': 't', '特': 't', '题': 't',
    '提': 't', '体': 't', '天': 't', '田': 't', '条': 't', '铁': 't', '听': 't', '停': 't', '通': 't', '同': 't',
    '头': 't', '图': 't', '土': 't', '团': 't', '外': 'w', '完': 'w', '玩': 'w', '万': 'w', '王': 'w', '网': 'w',
    '往': 'w', '望': 'w', '为': 'w', '委': 'w', '位': 'w', '味': 'w', '卫': 'w', '温': 'w', '文': 'w', '闻': 'w',
    '问': 'w', '我': 'w', '屋': 'w', '无': 'w', '五': 'w', '午': 'w', '武': 'w', '吴': 'w', '物': 'w', '西': 'x',
    '吸': 'x', '希': 'x', '息': 'x', '习': 'x', '席': 'x', '喜': 'x', '系': 'x', '细': 'x', '下': 'x', '夏': 'x',
    '先': 'x', '鲜': 'x', '现': 'x', '线': 'x', '县': 'x', '乡': 'x', '香': 'x', '向': 'x', '象': 'x', '像': 'x',
    '小': 'x', '笑': 'x', '效': 'x', '些': 'x', '写': 'x', '谢': 'x', '心': 'x', '辛': 'x', '新': 'x', '信': 'x',
    '兴': 'x', '星': 'x', '行': 'x', '形': 'x', '姓': 'x', '幸': 'x', '性': 'x', '许': 'x', '徐': 'x', '学': 'x',
    '雪': 'x', '血': 'x', '呀': 'y', '压': 'y', '亚': 'y', '烟': 'y', '严': 'y', '颜': 'y', '言': 'y', '研': 'y',
    '眼': 'y', '演': 'y', '阳': 'y', '杨': 'y', '养': 'y', '样': 'y', '要': 'y', '也': 'y', '业': 'y', '叶': 'y',
    '夜': 'y', '一': 'y', '衣': 'y', '医': 'y', '依': 'y', '已': 'y', '以': 'y', '意': 'y', '艺': 'y', '易': 'y',
    '因': 'y', '音': 'y', '银': 'y', '引': 'y', '印': 'y', '应': 'y', '英': 'y', '影': 'y', '永': 'y', '用': 'y',
    '优': 'y', '由': 'y', '油': 'y', '游': 'y', '友': 'y', '有': 'y', '又': 'y', '右': 'y', '于': 'y', '余': 'y',
    '鱼': 'y', '雨': 'y', '语': 'y', '玉': 'y', '育': 'y', '遇': 'y', '元': 'y', '园': 'y', '原': 'y', '员': 'y',
    '远': 'y', '院': 'y', '愿': 'y', '月': 'y', '云': 'y', '运': 'y', '在': 'z', '再': 'z', '咱': 'z', '早': 'z',
    '造': 'z', '则': 'z', '怎': 'z', '增': 'z', '展': 'z', '战': 'z', '张': 'z', '章': 'z', '赵': 'z', '照': 'z',
    '者': 'z', '这': 'z', '真': 'z', '整': 'z', '正': 'z', '政': 'z', '之': 'z', '支': 'z', '知': 'z', '直': 'z',
    '值': 'z', '职': 'z', '只': 'z', '指': 'z', '至': 'z', '制': 'z', '志': 'z', '治': 'z', '中': 'z', '钟': 'z',
    '重': 'z', '众': 'z', '周': 'z', '州': 'z', '朱': 'z', '主': 'z', '住': 'z', '助': 'z', '专': 'z', '转': 'z',
    '庄': 'z', '装': 'z', '状': 'z', '准': 'z', '子': 'z', '自': 'z', '字': 'z', '总': 'z', '走': 'z', '族': 'z',
    '组': 'z', '嘴': 'z', '最': 'z', '作': 'z', '昨': 'z', '左': 'z', '做': 'z', '坐': 'z', '座': 'z', '郑': 'z',
    '邹': 'z', '邓': 'd', '沈': 's', '韩': 'h', '杨': 'y', '朱': 'z', '秦': 'q', '尤': 'y', '孔': 'k', '曹': 'c',
    '魏': 'w', '陶': 't', '姜': 'j', '戚': 'q', '潘': 'p', '葛': 'g', '范': 'f', '彭': 'p', '郎': 'l', '鲁': 'l',
    '韦': 'w', '昌': 'c', '马': 'm', '苗': 'm', '凤': 'f', '袁': 'y', '柳': 'l', '酆': 'f', '鲍': 'b', '费': 'f',
    '岑': 'c', '薛': 'x', '雷': 'l', '贺': 'h', '倪': 'n', '汤': 't', '滕': 't', '殷': 'y', '罗': 'l', '毕': 'b',
    '郝': 'h', '邬': 'w', '安': 'a', '傅': 'f', '皮': 'p', '卞': 'b', '伍': 'w', '卜': 'b', '孟': 'm', '穆': 'm',
    '萧': 'x', '尹': 'y', '姚': 'y', '邵': 's', '汪': 'w', '祁': 'q', '狄': 'd', '米': 'm', '贝': 'b', '明': 'm',
    '臧': 'z', '茅': 'm', '熊': 'x', '舒': 's', '屈': 'q', '项': 'x', '祝': 'z', '董': 'd', '梁': 'l', '杜': 'd',
    '阮': 'r', '蓝': 'l', '闵': 'm', '席': 'x', '季': 'j', '麻': 'm', '贾': 'j', '路': 'l', '娄': 'l', '危': 'w',
    '江': 'j', '童': 't', '郭': 'g', '梅': 'm', '盛': 's', '林': 'l', '刁': 'd', '邱': 'q', '骆': 'l', '高': 'g',
    '夏': 'x', '蔡': 'c', '田': 't', '樊': 'f', '凌': 'l', '霍': 'h', '虞': 'y', '万': 'w', '柯': 'k', '昝': 'z',
    '卢': 'l', '莫': 'm', '经': 'j', '房': 'f', '裘': 'q', '缪': 'm', '干': 'g', '解': 'x', '宗': 'z', '丁': 'd',
    '宣': 'x', '贲': 'b', '单': 's', '杭': 'h', '洪': 'h', '包': 'b', '诸': 'z', '左': 'z', '石': 's', '崔': 'c',
    '吉': 'j', '钮': 'n', '龚': 'g', '程': 'c', '嵇': 'j', '邢': 'x', '滑': 'h', '裴': 'p', '陆': 'l', '荣': 'r',
    '翁': 'w', '荀': 'x', '羊': 'y', '於': 'y', '惠': 'h', '甄': 'z', '麴': 'q', '家': 'j', '封': 'f', '芮': 'r',
    '羿': 'y', '储': 'c', '靳': 'j', '汲': 'j', '邴': 'b', '糜': 'm', '松': 's', '井': 'j', '段': 'd', '富': 'f',
    '巫': 'w', '乌': 'w', '焦': 'j', '巴': 'b', '弓': 'g', '牧': 'm', '隗': 'w', '山': 's', '谷': 'g', '车': 'c',
    '侯': 'h', '宓': 'm', '蓬': 'p', '全': 'q', '郗': 'x', '班': 'b', '仰': 'y', '秋': 'q', '仲': 'z', '伊': 'y',
    '宫': 'g', '宁': 'n', '仇': 'q', '栾': 'l', '暴': 'b', '甘': 'g', '钭': 't', '厉': 'l', '戎': 'r', '祖': 'z',
    '武': 'w', '符': 'f', '刘': 'l', '景': 'j', '詹': 'z', '束': 's', '龙': 'l', '叶': 'y', '幸': 'x', '司': 's',
    '韶': 's', '郜': 'g', '黎': 'l', '蓟': 'j', '薄': 'b', '印': 'y', '宿': 's', '白': 'b', '怀': 'h', '蒲': 'p',
    '邰': 't', '从': 'c', '鄂': 'e', '索': 's', '咸': 'x', '籍': 'j', '赖': 'l', '卓': 'z', '蔺': 'l', '屠': 't',
    '蒙': 'm', '池': 'c', '乔': 'q', '阴': 'y', '郁': 'y', '胥': 'x', '能': 'n', '苍': 'c', '双': 's', '闻': 'w',
    '莘': 's', '党': 'd', '翟': 'z', '谭': 't', '贡': 'g', '劳': 'l', '逄': 'p', '姬': 'j', '申': 's', '扶': 'f',
    '堵': 'd', '冉': 'r', '宰': 'z', '郦': 'l', '雍': 'y', '却': 'q', '璩': 'q', '桑': 's', '桂': 'g', '濮': 'p',
    '牛': 'n', '寿': 's', '通': 't', '边': 'b', '扈': 'h', '燕': 'y', '冀': 'j', '郏': 'j', '浦': 'p', '尚': 's',
    '农': 'n', '温': 'w', '别': 'b', '庄': 'z', '晏': 'y', '柴': 'c', '瞿': 'q', '阎': 'y', '充': 'c', '慕': 'm',
    '连': 'l', '茹': 'r', '习': 'x', '宦': 'h', '艾': 'a', '鱼': 'y', '容': 'r', '向': 'x', '古': 'g', '易': 'y',
    '慎': 's', '戈': 'g', '廖': 'l', '庾': 'y', '终': 'z', '暨': 'j', '居': 'j', '衡': 'h', '步': 'b', '都': 'd',
    '耿': 'g', '满': 'm', '弘': 'h', '匡': 'k', '国': 'g', '文': 'w', '寇': 'k', '广': 'g', '禄': 'l', '阙': 'q',
    '东': 'd', '欧': 'o', '殳': 's', '沃': 'w', '利': 'l', '蔚': 'w', '越': 'y', '夔': 'k', '隆': 'l', '师': 's',
    '巩': 'g', '厍': 's', '聂': 'n', '晁': 'c', '勾': 'g', '敖': 'a', '融': 'r', '冷': 'l', '訾': 'z', '辛': 'x',
    '阚': 'k', '那': 'n', '简': 'j', '饶': 'r', '空': 'k', '曾': 'z', '毋': 'w', '沙': 's', '乜': 'n', '养': 'y',
    '鞠': 'j', '须': 'x', '丰': 'f', '巢': 'c', '关': 'g', '蒯': 'k', '相': 'x', '查': 'z', '后': 'h', '荆': 'j',
    '红': 'h', '游': 'y', '竺': 'z', '权': 'q', '逯': 'l', '盖': 'g', '益': 'y', '桓': 'h', '公': 'g'
  };

  window.TinyPinyin = {
    isSupported: function() {
      return true;
    },

    convertToPinyin: function(str, separator, onlyInitial) {
      if (!str) return '';
      separator = separator || '';
      const result = [];

      for (let i = 0; i < str.length; i++) {
        const char = str[i];
        if (pinyinDict[char]) {
          result.push(onlyInitial ? pinyinDict[char][0] : pinyinDict[char]);
        } else if (/[a-zA-Z0-9]/.test(char)) {
          result.push(char.toLowerCase());
        }
      }

      return result.join(separator);
    }
  };
})(window);
