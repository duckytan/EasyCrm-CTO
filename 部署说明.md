# AI-CRM Serverless - å®Œæ•´éƒ¨ç½²è¯´æ˜

> **é¡¹ç›®å½“å‰çŠ¶æ€**: âœ… å¯ç›´æ¥éƒ¨ç½²ä½¿ç”¨  
> **å®Œæˆåº¦**: 85%ï¼ˆæ‰€æœ‰æ ¸å¿ƒåç«¯ API å·²å®Œæˆï¼‰  
> **æµ‹è¯•çŠ¶æ€**: âœ… 91/91 æµ‹è¯•å…¨éƒ¨é€šè¿‡  

---

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº Vercel Serverless çš„ AI-CRM åç«¯ç³»ç»Ÿï¼ŒåŒ…å«å®Œæ•´çš„ï¼š
- âœ… JWT è®¤è¯ç³»ç»Ÿ
- âœ… å®¢æˆ·å…³ç³»ç®¡ç†ï¼ˆCRMï¼‰
- âœ… å›è®¿è®°å½•ç®¡ç†
- âœ… äº§å“è®¢å•ç®¡ç†
- âœ… ä»ªè¡¨ç›˜ç»Ÿè®¡
- âœ… 11 ä¸ªé¢„è®¾æ•°æ®æ¨¡å—

**æŠ€æœ¯æ ˆ**ï¼š
- Node.js 18.x + TypeScript
- Prisma ORM + PostgreSQL
- Vercel Serverless Functions
- JWT è®¤è¯ + Zod éªŒè¯

---

## äºŒã€éƒ¨ç½²å‰å‡†å¤‡

### 2.1 å‡†å¤‡æ•°æ®åº“

ä½ éœ€è¦ä¸€ä¸ª PostgreSQL æ•°æ®åº“ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå…è´¹é€‰é¡¹ï¼š

#### é€‰é¡¹ 1ï¼šSupabaseï¼ˆæ¨èï¼Œå›½å†…å¯è®¿é—®ï¼‰

1. è®¿é—® https://supabase.com
2. æ³¨å†Œå¹¶åˆ›å»ºæ–°é¡¹ç›®
3. è¿›å…¥é¡¹ç›®è®¾ç½®ï¼š`Project Settings > Database`
4. æ‰¾åˆ° `Connection string` (URI format)ï¼Œå¤åˆ¶å¤‡ç”¨
5. ç¤ºä¾‹ï¼š`postgresql://postgres.xxx:password@aws-0-ap-southeast-1.pooler.supabase.com:5432/postgres`

#### é€‰é¡¹ 2ï¼šNeonï¼ˆå…è´¹ï¼Œæ— ç¡çœ ï¼‰

1. è®¿é—® https://neon.tech
2. åˆ›å»ºæ–°é¡¹ç›®
3. å¤åˆ¶è¿æ¥å­—ç¬¦ä¸²

#### é€‰é¡¹ 3ï¼šVercel Postgres

1. åœ¨ Vercel Dashboard åˆ›å»º Postgres æ•°æ®åº“
2. è‡ªåŠ¨é›†æˆåˆ°é¡¹ç›®ä¸­

### 2.2 å‡†å¤‡éƒ¨ç½²å·¥å…·

```bash
# å®‰è£… Node.js 18+ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
# è®¿é—® https://nodejs.org/ ä¸‹è½½å®‰è£…

# å®‰è£… Vercel CLI
npm install -g vercel

# ç™»å½• Vercel
vercel login
```

---

## ä¸‰ã€æœ¬åœ°é…ç½®å’Œæµ‹è¯•

### 3.1 å…‹éš†é¡¹ç›®

```bash
git clone <ä½ çš„ä»“åº“åœ°å€>
cd ai-crm-serverless
```

### 3.2 å®‰è£…ä¾èµ–

```bash
npm install
```

### 3.3 é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶
nano .env  # æˆ–ä½¿ç”¨å…¶ä»–ç¼–è¾‘å™¨ï¼ˆWindows å¯ç”¨ notepad .envï¼‰
```

åœ¨ `.env` æ–‡ä»¶ä¸­å¡«å…¥ï¼š

```bash
# æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼ˆä» 2.1 æ­¥éª¤è·å–ï¼‰
DATABASE_URL="postgresql://postgres:password@host:5432/database"

# JWT å¯†é’¥ï¼ˆéœ€è¦ç”Ÿæˆï¼‰
JWT_SECRET="æ›¿æ¢ä¸ºéšæœºå­—ç¬¦ä¸²"
JWT_REFRESH_SECRET="æ›¿æ¢ä¸ºå¦ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²"
```

**ç”Ÿæˆéšæœºå¯†é’¥**ï¼š

```bash
# åœ¨ç»ˆç«¯è¿è¡Œï¼ˆç”Ÿæˆä¸¤æ¬¡ï¼Œåˆ†åˆ«ç”¨äºä¸¤ä¸ªå¯†é’¥ï¼‰
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

ç¤ºä¾‹è¾“å‡ºï¼š
```
a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456
```

å°†ç”Ÿæˆçš„å­—ç¬¦ä¸²å¤åˆ¶åˆ° `.env` æ–‡ä»¶ä¸­ã€‚

### 3.4 åˆå§‹åŒ–æ•°æ®åº“

```bash
# 1. ç”Ÿæˆ Prisma Client
npm run prisma:generate

# 2. æ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼ˆåˆ›å»ºè¡¨ç»“æ„ï¼‰
npx prisma migrate deploy

# 3. å¡«å……ç§å­æ•°æ®ï¼ˆç®¡ç†å‘˜è´¦æˆ· + é¢„è®¾æ•°æ®ï¼‰
npm run prisma:seed
```

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ ä¼šçœ‹åˆ°ï¼š
```
âœ” Seeding completed successfully!
âœ” ç®¡ç†å‘˜è´¦æˆ·å·²åˆ›å»º
âœ” é¢„è®¾æ•°æ®å·²å¡«å……
```

**é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·**ï¼š
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`admin123`
- âš ï¸ **é‡è¦**ï¼šéƒ¨ç½²åè¯·ç«‹å³ä¿®æ”¹å¯†ç ï¼

### 3.5 æœ¬åœ°æµ‹è¯•

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

æ‰“å¼€æ–°ç»ˆç«¯ï¼Œè¿è¡Œæµ‹è¯•è„šæœ¬ï¼š

```bash
# èµ‹äºˆæ‰§è¡Œæƒé™ï¼ˆLinux/Macï¼‰
chmod +x test-api.sh

# è¿è¡Œæµ‹è¯•
./test-api.sh http://localhost:3000
```

**Windows ç”¨æˆ·**ï¼šå¯ä»¥æ‰‹åŠ¨æµ‹è¯•ï¼š

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:3000/api/health

# ç™»å½•æµ‹è¯•
curl -X POST http://localhost:3000/api/auth/login ^
  -H "Content-Type: application/json" ^
  -d "{\"username\":\"admin\",\"password\":\"admin123\"}"
```

å¦‚æœçœ‹åˆ°è¿”å› JSON æ•°æ®ï¼Œè¯´æ˜é…ç½®æˆåŠŸï¼

---

## å››ã€éƒ¨ç½²åˆ° Vercel

### 4.1 éƒ¨ç½²é¡¹ç›®

åœ¨é¡¹ç›®ç›®å½•æ‰§è¡Œï¼š

```bash
# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
vercel --prod
```

æŒ‰ç…§æç¤ºæ“ä½œï¼š
1. é€‰æ‹©ä½ çš„å›¢é˜Ÿï¼ˆæˆ–ä¸ªäººè´¦æˆ·ï¼‰
2. ç¡®è®¤é¡¹ç›®åç§°
3. é€‰æ‹©é¡¹ç›®ç›®å½•ï¼ˆé»˜è®¤ `./`ï¼‰
4. ç­‰å¾…éƒ¨ç½²å®Œæˆ

éƒ¨ç½²æˆåŠŸåä¼šæ˜¾ç¤ºé¡¹ç›® URLï¼Œä¾‹å¦‚ï¼š
```
https://ai-crm-serverless.vercel.app
```

### 4.2 é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡

**é‡è¦**ï¼šéœ€è¦åœ¨ Vercel Dashboard é…ç½®ç¯å¢ƒå˜é‡ã€‚

1. è®¿é—® https://vercel.com/dashboard
2. è¿›å…¥ä½ çš„é¡¹ç›®
3. ç‚¹å‡» `Settings` > `Environment Variables`
4. æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

| å˜é‡å | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `DATABASE_URL` | `postgresql://...` | ä½ çš„æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸² |
| `JWT_SECRET` | éšæœºå­—ç¬¦ä¸² | JWT è®¿é—®ä»¤ç‰Œå¯†é’¥ï¼ˆâ‰¥32å­—ç¬¦ï¼‰|
| `JWT_REFRESH_SECRET` | éšæœºå­—ç¬¦ä¸² | JWT åˆ·æ–°ä»¤ç‰Œå¯†é’¥ï¼ˆâ‰¥32å­—ç¬¦ï¼‰|

**æ³¨æ„**ï¼šæ¯ä¸ªå˜é‡éƒ½è¦é€‰æ‹© `Production` ç¯å¢ƒï¼

### 4.3 é‡æ–°éƒ¨ç½²

é…ç½®ç¯å¢ƒå˜é‡åï¼Œéœ€è¦é‡æ–°éƒ¨ç½²ï¼š

```bash
vercel --prod
```

æˆ–åœ¨ Vercel Dashboard ç‚¹å‡» `Deployments` > æœ€æ–°éƒ¨ç½²æ—çš„èœå• > `Redeploy`ã€‚

### 4.4 åˆå§‹åŒ–ç”Ÿäº§æ•°æ®åº“

å¦‚æœä½ çš„ç”Ÿäº§æ•°æ®åº“æ˜¯ç©ºçš„ï¼Œéœ€è¦åˆå§‹åŒ–ï¼š

```bash
# ä½¿ç”¨ç”Ÿäº§æ•°æ®åº“ URL
DATABASE_URL="<ä½ çš„ç”Ÿäº§æ•°æ®åº“URL>" npx prisma migrate deploy
DATABASE_URL="<ä½ çš„ç”Ÿäº§æ•°æ®åº“URL>" npm run prisma:seed
```

---

## äº”ã€éªŒè¯éƒ¨ç½²

### 5.1 ä½¿ç”¨æµ‹è¯•è„šæœ¬

```bash
./test-api.sh https://your-app.vercel.app
```

å¦‚æœçœ‹åˆ° "ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼"ï¼Œéƒ¨ç½²æˆåŠŸï¼

### 5.2 æ‰‹åŠ¨æµ‹è¯•

#### 1. å¥åº·æ£€æŸ¥

```bash
curl https://your-app.vercel.app/api/health
```

é¢„æœŸè¿”å›ï¼š
```json
{
  "status": "ok",
  "timestamp": "2024-12-19T..."
}
```

#### 2. ç™»å½•æµ‹è¯•

```bash
curl -X POST https://your-app.vercel.app/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'
```

é¢„æœŸè¿”å›ï¼š
```json
{
  "accessToken": "eyJhbGci...",
  "refreshToken": "eyJhbGci...",
  "user": {
    "id": "...",
    "username": "admin",
    "role": "ADMIN"
  }
}
```

**å¤åˆ¶ `accessToken`**ï¼Œåç»­è¯·æ±‚éœ€è¦ç”¨åˆ°ã€‚

#### 3. æµ‹è¯•è·å–å®¢æˆ·åˆ—è¡¨

```bash
curl https://your-app.vercel.app/api/customers \
  -H "Authorization: Bearer <æ›¿æ¢ä¸ºä½ çš„ accessToken>"
```

é¢„æœŸè¿”å›ï¼š
```json
{
  "data": [],
  "total": 0,
  "page": 1,
  "limit": 10
}
```

#### 4. æµ‹è¯•åˆ›å»ºå®¢æˆ·

```bash
curl -X POST https://your-app.vercel.app/api/customers \
  -H "Authorization: Bearer <ä½ çš„ accessToken>" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "å¼ ä¸‰",
    "phone": "13800138000",
    "company": "æµ‹è¯•å…¬å¸",
    "categoryId": "CAT001",
    "intentionLevel": "A"
  }'
```

å¦‚æœè¿”å›åˆ›å»ºçš„å®¢æˆ·æ•°æ®ï¼Œè¯´æ˜ä¸€åˆ‡æ­£å¸¸ï¼

---

## å…­ã€ä½¿ç”¨ Postman æµ‹è¯•ï¼ˆæ¨èï¼‰

### 6.1 å¯¼å…¥ Collection

1. æ‰“å¼€ Postmanï¼ˆæˆ– Insomniaã€Thunder Clientï¼‰
2. å¯¼å…¥ `AI-CRM-Postman-Collection.json`
3. åˆ›å»ºç¯å¢ƒï¼Œæ·»åŠ å˜é‡ï¼š
   - `base_url`: `https://your-app.vercel.app`
   - `access_token`: ç•™ç©ºï¼ˆç™»å½•åè‡ªåŠ¨å¡«å……ï¼‰

### 6.2 æµ‹è¯•æµç¨‹

1. è¿è¡Œ "1. è®¤è¯ > ç™»å½•"
   - æˆåŠŸåä¼šè‡ªåŠ¨ä¿å­˜ Token åˆ°ç¯å¢ƒå˜é‡
2. è¿è¡Œ "2. å®¢æˆ·ç®¡ç† > è·å–å®¢æˆ·åˆ—è¡¨"
3. è¿è¡Œ "2. å®¢æˆ·ç®¡ç† > åˆ›å»ºå®¢æˆ·"
4. è¿è¡Œ "5. ä»ªè¡¨ç›˜ > è·å–ç»Ÿè®¡æ•°æ®"

---

## ä¸ƒã€æŸ¥çœ‹å’Œç®¡ç†æ•°æ®

### 7.1 ä½¿ç”¨ Prisma Studio

```bash
# æœ¬åœ°æ•°æ®åº“
npx prisma studio

# ç”Ÿäº§æ•°æ®åº“
DATABASE_URL="<ç”Ÿäº§URL>" npx prisma studio
```

è®¿é—® http://localhost:5555 å³å¯å¯è§†åŒ–ç®¡ç†æ•°æ®ã€‚

### 7.2 ç§å­æ•°æ®è¯´æ˜

è¿è¡Œ `npm run prisma:seed` åè‡ªåŠ¨åˆ›å»ºï¼š

**ç®¡ç†å‘˜è´¦æˆ·**ï¼š
- ç”¨æˆ·åï¼šadmin
- å¯†ç ï¼šadmin123

**é¢„è®¾æ•°æ®**ï¼š
- 4 ä¸ªå®¢æˆ·åˆ†ç±»ï¼ˆè€å®¢æˆ·ã€æ–°å®¢æˆ·ã€æ½œåœ¨å®¢æˆ·ã€å…¶ä»–ï¼‰
- 5 ä¸ªæ„å‘ç­‰çº§ï¼ˆA/B/C/D/Hï¼‰
- 8 ä¸ªåœ°åŒºï¼ˆåŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å·ã€æ·±åœ³ç­‰ï¼‰
- 6 ä¸ªé¢„ç®—èŒƒå›´
- 3 ä¸ªå›è®¿æ–¹å¼ï¼ˆç”µè¯ã€å¾®ä¿¡ã€é¢è°ˆï¼‰
- 3 ä¸ªå›è®¿ç±»å‹ï¼ˆåˆè®¿ã€è·Ÿè¿›ã€æˆäº¤ï¼‰
- ç­‰ç­‰...

---

## å…«ã€å¸¸è§é—®é¢˜

### Q1: éƒ¨ç½²åè®¿é—® API è¿”å› 500 é”™è¯¯

**åŸå› **ï¼šç¯å¢ƒå˜é‡é…ç½®é”™è¯¯æˆ–æ•°æ®åº“è¿æ¥å¤±è´¥ã€‚

**è§£å†³**ï¼š
1. æ£€æŸ¥ Vercel Dashboard çš„ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤æ•°æ®åº“ URL æ ¼å¼æ­£ç¡®
3. æµ‹è¯•æ•°æ®åº“æ˜¯å¦å¯ä»¥è¿æ¥ï¼š
   ```bash
   DATABASE_URL="<ä½ çš„URL>" npx prisma db pull
   ```

### Q2: ç™»å½•æ—¶è¿”å› 401 æˆ–ç”¨æˆ·ä¸å­˜åœ¨

**åŸå› **ï¼šç”Ÿäº§æ•°æ®åº“æ²¡æœ‰è¿è¡Œç§å­è„šæœ¬ã€‚

**è§£å†³**ï¼š
```bash
DATABASE_URL="<ç”Ÿäº§URL>" npm run prisma:seed
```

### Q3: Token è¿‡æœŸ

**åŸå› **ï¼šè®¿é—®ä»¤ç‰Œæœ‰æ•ˆæœŸ 15 åˆ†é’Ÿã€‚

**è§£å†³**ï¼šä½¿ç”¨åˆ·æ–°ä»¤ç‰Œè·å–æ–°çš„è®¿é—®ä»¤ç‰Œï¼š
```bash
curl -X POST https://your-app.vercel.app/api/auth/refresh \
  -H "Content-Type: application/json" \
  -d '{"refreshToken":"<ä½ çš„åˆ·æ–°ä»¤ç‰Œ>"}'
```

### Q4: æµ‹è¯•è„šæœ¬æç¤º "curl: command not found"

**Windows ç”¨æˆ·**ï¼š
- å®‰è£… Git Bash æˆ–ä½¿ç”¨ Postman æµ‹è¯•
- æˆ–å®‰è£… curlï¼š`choco install curl` (éœ€è¦ Chocolatey)

### Q5: Prisma ç”ŸæˆæŠ¥é”™

**è§£å†³**ï¼š
```bash
# æ¸…é™¤ç¼“å­˜
rm -rf node_modules/.prisma
rm -rf node_modules/@prisma

# é‡æ–°å®‰è£…
npm install
npm run prisma:generate
```

### Q6: å¦‚ä½•ä¿®æ”¹ç®¡ç†å‘˜å¯†ç ï¼Ÿ

**æ–¹æ³• 1**ï¼šä½¿ç”¨ Prisma Studio
```bash
npx prisma studio
```
æ‰¾åˆ° `managers` è¡¨ï¼Œä½†éœ€è¦ç”¨ bcrypt åŠ å¯†æ–°å¯†ç ã€‚

**æ–¹æ³• 2**ï¼šç¼–å†™è„šæœ¬
```javascript
// change-password.js
const bcrypt = require('bcryptjs');
const password = 'your-new-password';
const hash = bcrypt.hashSync(password, 10);
console.log('New password hash:', hash);
```

è¿è¡Œï¼š
```bash
node change-password.js
```

å°†è¾“å‡ºçš„å“ˆå¸Œå€¼å¤åˆ¶åˆ°æ•°æ®åº“çš„ `passwordHash` å­—æ®µã€‚

---

## ä¹ã€API å®Œæ•´åˆ—è¡¨

### 9.1 è®¤è¯æ¥å£ï¼ˆæ— éœ€ Tokenï¼‰
- `GET /api/health` - å¥åº·æ£€æŸ¥
- `POST /api/auth/login` - ç™»å½•
- `POST /api/auth/refresh` - åˆ·æ–° Token

### 9.2 å®¢æˆ·ç®¡ç†ï¼ˆéœ€è¦ Tokenï¼‰
- `GET /api/customers` - å®¢æˆ·åˆ—è¡¨
- `POST /api/customers` - åˆ›å»ºå®¢æˆ·
- `GET /api/customers/:id` - å®¢æˆ·è¯¦æƒ…
- `PUT /api/customers/:id` - æ›´æ–°å®¢æˆ·
- `DELETE /api/customers/:id` - åˆ é™¤å®¢æˆ·

**æŸ¥è¯¢å‚æ•°**ï¼š
- `page`: é¡µç ï¼ˆé»˜è®¤ 1ï¼‰
- `limit`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤ 10ï¼‰
- `search`: æœç´¢å…³é”®è¯ï¼ˆå§“å/å…¬å¸/ç”µè¯ï¼‰
- `categoryId`: åˆ†ç±» ID
- `intentionLevel`: æ„å‘ç­‰çº§

### 9.3 å›è®¿è®°å½•ï¼ˆéœ€è¦ Tokenï¼‰
- `GET /api/visits` - å›è®¿åˆ—è¡¨
- `POST /api/visits` - åˆ›å»ºå›è®¿
- `GET /api/visits/:id` - å›è®¿è¯¦æƒ…
- `PUT /api/visits/:id` - æ›´æ–°å›è®¿
- `DELETE /api/visits/:id` - åˆ é™¤å›è®¿

### 9.4 äº§å“è®¢å•ï¼ˆéœ€è¦ Tokenï¼‰
- `GET /api/products` - è®¢å•åˆ—è¡¨
- `POST /api/products` - åˆ›å»ºè®¢å•
- `GET /api/products/:id` - è®¢å•è¯¦æƒ…
- `PUT /api/products/:id` - æ›´æ–°è®¢å•
- `DELETE /api/products/:id` - åˆ é™¤è®¢å•
- `GET /api/products/statistics/summary` - é”€å”®ç»Ÿè®¡

### 9.5 ä»ªè¡¨ç›˜ï¼ˆéœ€è¦ Tokenï¼‰
- `GET /api/dashboard/statistics` - ç»Ÿè®¡æ•°æ®

è¿”å›ï¼š
- æœˆåº¦é”€å”®æ‘˜è¦ï¼ˆæ€»é¢ã€è®¢å•æ•°ã€å¹³å‡è®¢å•ï¼‰
- å®¢æˆ·ç»Ÿè®¡ï¼ˆæ–°å¢ã€å›è®¿æ¬¡æ•°ã€æˆäº¤å®¢æˆ·ï¼‰
- æ„å‘åˆ†å¸ƒï¼ˆA/B/C/D/H çº§å®¢æˆ·æ•°é‡ï¼‰
- æé†’åˆ—è¡¨ï¼ˆå›è®¿æé†’ã€ç”Ÿæ—¥æé†’ï¼‰

### 9.6 é¢„è®¾æ•°æ®ç®¡ç†ï¼ˆéœ€è¦ Tokenï¼‰

ä»¥ä¸‹æ‰€æœ‰æ¨¡å—éƒ½æ”¯æŒï¼š
- `GET /<æ¨¡å—å>` - åˆ—è¡¨
- `POST /<æ¨¡å—å>` - åˆ›å»º
- `GET /<æ¨¡å—å>/:id` - è¯¦æƒ…
- `PUT /<æ¨¡å—å>/:id` - æ›´æ–°
- `DELETE /<æ¨¡å—å>/:id` - åˆ é™¤

**é¢„è®¾æ•°æ®æ¨¡å—**ï¼š
1. `/api/presets/customer-categories` - å®¢æˆ·åˆ†ç±»
2. `/api/presets/customer-intentions` - å®¢æˆ·æ„å‘
3. `/api/presets/regions` - åœ°åŒº
4. `/api/presets/budget-ranges` - é¢„ç®—èŒƒå›´
5. `/api/presets/superior-contacts` - ä¸Šçº§è”ç³»äºº
6. `/api/presets/subordinate-contacts` - ä¸‹çº§è”ç³»äºº
7. `/api/presets/preset-products` - é¢„è®¾äº§å“
8. `/api/presets/visit-methods` - å›è®¿æ–¹å¼
9. `/api/presets/visit-types` - å›è®¿ç±»å‹
10. `/api/presets/navigation-modes` - å¯¼èˆªæ¨¡å¼
11. `/api/presets/reminder-cycles` - æé†’å‘¨æœŸ

---

## åã€å®‰å…¨å»ºè®®

### 10.1 ç”Ÿäº§ç¯å¢ƒæ£€æŸ¥æ¸…å•

- [ ] ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç 
- [ ] ä½¿ç”¨å¼ºéšæœºå¯†é’¥ï¼ˆJWT_SECRET â‰¥ 32 å­—ç¬¦ï¼‰
- [ ] æ•°æ®åº“ä½¿ç”¨ SSL è¿æ¥
- [ ] å®šæœŸå¤‡ä»½æ•°æ®åº“
- [ ] å¯ç”¨ Vercel Analyticsï¼ˆç›‘æ§ï¼‰
- [ ] é…ç½® CORSï¼ˆå¦‚æœæœ‰å‰ç«¯ï¼‰

### 10.2 æ¨èçš„å¯†é’¥å¼ºåº¦

```bash
# ç”Ÿæˆå¼ºå¯†é’¥ï¼ˆ64 å­—ç¬¦ï¼‰
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
```

### 10.3 æ•°æ®å¤‡ä»½

```bash
# å¯¼å‡ºæ•°æ®åº“
pg_dump <DATABASE_URL> > backup_$(date +%Y%m%d).sql

# æ¢å¤æ•°æ®åº“
psql <DATABASE_URL> < backup_20241219.sql
```

---

## åä¸€ã€ä¸‹ä¸€æ­¥

### é€‰é¡¹ 1ï¼šå¼€å‘å‰ç«¯ç•Œé¢

åç«¯ API å·²å®Œæˆï¼Œå¯ä»¥ï¼š
- ä½¿ç”¨ React/Vue/Next.js æ„å»ºè‡ªå®šä¹‰å‰ç«¯
- é›†æˆç°æˆçš„ Admin Dashboard æ¨¡æ¿
- ä½¿ç”¨æ— ä»£ç å·¥å…·ï¼ˆRetoolã€Appsmithï¼‰

### é€‰é¡¹ 2ï¼šå¢å¼ºåŠŸèƒ½

- å®ç°æ•°æ®å¯¼å‡ºï¼ˆExcel/CSVï¼‰
- æ·»åŠ é‚®ä»¶é€šçŸ¥åŠŸèƒ½
- é›†æˆç¬¬ä¸‰æ–¹ CRM ç³»ç»Ÿ
- æ·»åŠ æ›´å¤šç»Ÿè®¡æŠ¥è¡¨

### é€‰é¡¹ 3ï¼šä¼˜åŒ–æ€§èƒ½

- æ·»åŠ  Redis ç¼“å­˜
- ä¼˜åŒ–æ•°æ®åº“ç´¢å¼•
- é…ç½® CDN

---

## åäºŒã€æŠ€æœ¯æ”¯æŒ

**é¡¹ç›®æ–‡æ¡£**ï¼š
- `QUICK_DEPLOY_GUIDE.md` - å¿«é€Ÿéƒ¨ç½²æŒ‡å—ï¼ˆè‹±æ–‡ï¼‰
- `README_DEPLOYMENT.md` - å®Œæ•´éƒ¨ç½²æŒ‡å—ï¼ˆè‹±æ–‡ï¼‰
- `DEVELOPMENT.md` - å¼€å‘æŒ‡å—
- `PROJECT_STATUS.md` - é¡¹ç›®çŠ¶æ€æŠ¥å‘Š

**åœ¨çº¿èµ„æº**ï¼š
- Vercel æ–‡æ¡£ï¼šhttps://vercel.com/docs
- Prisma æ–‡æ¡£ï¼šhttps://www.prisma.io/docs
- Supabase æ–‡æ¡£ï¼šhttps://supabase.com/docs

---

## åä¸‰ã€éªŒæ”¶æ¸…å•

éƒ¨ç½²å®Œæˆåï¼Œè¯·ç¡®è®¤ä»¥ä¸‹æ‰€æœ‰é¡¹ç›®ï¼š

- [ ] å¥åº·æ£€æŸ¥æ¥å£è¿”å› 200 OK
- [ ] ç™»å½•æ¥å£è¿”å› Token å’Œç”¨æˆ·ä¿¡æ¯
- [ ] å¯ä»¥åˆ›å»ºå®¢æˆ·
- [ ] å¯ä»¥æŸ¥è¯¢å®¢æˆ·åˆ—è¡¨
- [ ] å¯ä»¥æ›´æ–°å’Œåˆ é™¤å®¢æˆ·
- [ ] å¯ä»¥åˆ›å»ºå›è®¿è®°å½•
- [ ] å¯ä»¥åˆ›å»ºäº§å“è®¢å•
- [ ] ä»ªè¡¨ç›˜è¿”å›å®Œæ•´ç»Ÿè®¡æ•°æ®
- [ ] æ‰€æœ‰é¢„è®¾æ•°æ®æ¥å£æ­£å¸¸å·¥ä½œ
- [ ] Token åˆ·æ–°åŠŸèƒ½æ­£å¸¸
- [ ] ä¿®æ”¹äº†é»˜è®¤ç®¡ç†å‘˜å¯†ç 

**è‡ªåŠ¨æ£€æŸ¥**ï¼š
```bash
./test-api.sh https://your-app.vercel.app
```

å¦‚æœæ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼Œæ­å–œä½ éƒ¨ç½²æˆåŠŸï¼ğŸ‰

---

**æœ€åæ›´æ–°**: 2024-12-19  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**ç»´æŠ¤äºº**: AI Agent

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥é˜…é¡¹ç›®æ–‡æ¡£æˆ–æäº¤ Issueã€‚**
