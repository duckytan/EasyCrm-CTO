# 📊 Vercel 部署流程图

> 可视化的部署流程，让你一目了然整个部署过程

---

## 🎯 完整部署流程

```
┌─────────────────────────────────────────────────────────────────┐
│                         准备阶段                                  │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  注册 GitHub 账号 │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  注册 Vercel 账号 │
                    │  (用 GitHub 登录) │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │ 安装 Node.js      │
                    │ 安装 Vercel CLI   │
                    │ 安装 Git          │
                    └──────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                        数据库准备                                 │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  选择数据库服务    │
                    │  • Supabase ✓    │
                    │  • Neon          │
                    │  • Vercel PG     │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │   创建数据库项目   │
                    │   设置密码        │
                    │   选择区域        │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  获取连接字符串    │
                    │  DATABASE_URL    │
                    └──────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                         代码准备                                  │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │ 在 GitHub 创建仓库 │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  git init         │
                    │  git add .        │
                    │  git commit       │
                    │  git push         │
                    └──────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                        Vercel 配置                                │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  导入 GitHub 仓库  │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  配置项目设置      │
                    │  • 项目名称       │
                    │  • 框架预设       │
                    │  • 构建命令       │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  生成 JWT 密钥     │
                    │  • JWT_SECRET    │
                    │  • JWT_REFRESH   │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  添加环境变量      │
                    │  • DATABASE_URL  │
                    │  • JWT_SECRET    │
                    │  • JWT_REFRESH   │
                    └──────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                       数据库初始化                                 │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  npm install      │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  prisma:generate  │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  migrate deploy   │
                    │  (创建表结构)      │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  prisma:seed      │
                    │  (填充初始数据)    │
                    └──────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                          部署上线                                  │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  触发重新部署      │
                    │  git push 或      │
                    │  Vercel Redeploy │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  等待构建完成      │
                    │  Building...     │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  部署成功！        │
                    │  获取网站 URL     │
                    └──────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                          测试验证                                  │
└─────────────────────────────────────────────────────────────────┘
                              │
                    ┌─────────┴─────────┐
                    ▼                   ▼
          ┌──────────────┐    ┌──────────────┐
          │ 测试 API 接口 │    │ 测试前端页面  │
          │ /api/health  │    │ 登录界面      │
          └──────────────┘    └──────────────┘
                    │                   │
                    └─────────┬─────────┘
                              ▼
                    ┌──────────────────┐
                    │  登录测试          │
                    │  admin/admin123  │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  功能测试          │
                    │  • 仪表盘         │
                    │  • 客户管理       │
                    │  • 回访记录       │
                    └──────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                          安全加固                                  │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  修改默认密码      │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  备份密钥信息      │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  设置数据库备份    │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  🎉 完成！         │
                    │  网站已上线        │
                    └──────────────────┘
```

---

## 🔄 日常更新流程

```
┌──────────────┐
│  修改代码     │
└──────────────┘
        │
        ▼
┌──────────────┐
│  git add .   │
└──────────────┘
        │
        ▼
┌──────────────┐
│  git commit  │
└──────────────┘
        │
        ▼
┌──────────────┐
│  git push    │
└──────────────┘
        │
        ▼
┌──────────────┐
│  Vercel 自动  │
│  检测并部署   │
└──────────────┘
        │
        ▼
┌──────────────┐
│  1-2 分钟后   │
│  更新完成     │
└──────────────┘
```

---

## ⚠️ 常见问题处理流程

```
┌────────────────┐
│  部署失败了？   │
└────────────────┘
        │
        ▼
┌────────────────┐
│  检查环境变量   │
│  是否配置正确   │
└────────────────┘
        │
        ├─── 是 ───┐
        │          │
        ▼          ▼
┌────────────┐  ┌────────────┐
│ 检查数据库  │  │ 重新配置    │
│ 连接字符串  │  │ 环境变量    │
└────────────┘  └────────────┘
        │          │
        ▼          ▼
┌────────────┐  ┌────────────┐
│ 查看部署    │  │ 触发重新    │
│ 日志        │  │ 部署        │
└────────────┘  └────────────┘
        │
        ▼
┌────────────────┐
│  根据错误信息   │
│  查阅速查表     │
└────────────────┘
```

---

## 🎨 系统架构图

```
┌─────────────────────────────────────────────────────────────┐
│                         用户浏览器                            │
│                     https://xxx.vercel.app                  │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                         Vercel CDN                          │
│                     (全球边缘节点)                            │
└─────────────────────────────────────────────────────────────┘
                              │
                ┌─────────────┴─────────────┐
                ▼                           ▼
    ┌──────────────────┐        ┌──────────────────┐
    │  静态文件 (Public)│        │  Serverless API  │
    │  • HTML          │        │  Functions       │
    │  • CSS           │        │  • /api/*        │
    │  • JavaScript    │        │  Node.js 18.x    │
    │  • 图片          │        └──────────────────┘
    └──────────────────┘                  │
                                          ▼
                              ┌──────────────────┐
                              │  Prisma ORM      │
                              └──────────────────┘
                                          │
                                          ▼
                              ┌──────────────────┐
                              │  PostgreSQL DB   │
                              │  • Supabase      │
                              │  • Neon          │
                              │  • Vercel PG     │
                              └──────────────────┘
```

---

## 📱 移动端查看建议

如果你在移动设备上查看此文档，建议横屏查看流程图以获得更好的阅读体验。

或者访问以下文档获取文字版说明：
- [🚀 小白快速部署指南](VERCEL_QUICK_START.md) - 详细步骤说明
- [📋 部署检查清单](DEPLOYMENT_CHECKLIST.md) - 勾选式进度追踪

---

## 🔗 相关文档

- [部署文档导航](部署指南导航.md) - 选择适合你的文档
- [Vercel 部署速查表](QUICK_REFERENCE.md) - 常用命令速查
- [详细部署教程](Vercel部署详细教程.md) - 完整图文教程

---

**提示**：打印此流程图，贴在显示器旁边，方便随时查看！📄
